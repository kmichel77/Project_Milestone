---
title: "Project Milestone 4"
name: "Katherine Nazarian, Kimberly Michel" 
output: 
  html_document:
    df_print: paged
---

```{r, include=FALSE}
library(readr)
library(tidyverse)
library(dplyr)
library(lubridate)
library(zoo)
```



```{r, include=FALSE}
ca_vax_county <- read_csv("ca_vax_county.csv")
CA_flu_merge_demo_2 <- read_csv("CA_flu_merge_demo_2.csv")
ca_vax_county_2 <- read_csv("ca_vax_county_2.csv")
CA_flu_merge <- read_csv("CA_flu_merge.csv")
CA_flu_merge_demo <- read_csv("CA_flu_merge_demo.csv")
```


## Final datasets for creation of visualization
```{r}
CA_flu_vax <- merge(x = CA_flu_merge_demo, y = ca_vax_county, by = c("county", "quarter"), all = TRUE)
```

## Additional calculations
```{r}
ca_vax_county_2 <- ca_vax_county_2 %>% 
  add_column(percent_partial_vax = ca_vax_county_2$total_partial_vax/ca_vax_county$susceptible *100) %>% 
  add_column(percent_atleast_one_dose = ca_vax_county_2$cum_atleast_one_dose/ca_vax_county$susceptible *100)
```

## Visualization 1 - Comparing vax status among individuals within dataset
```{r, echo = TRUE}

ca_vax_county_2 %>%
  gather(key, percent_fully_vax ,-quarter, -susceptible, -county, -cum_fully_vax, -cum_atleast_one_dose, -total_partial_vax, -cum_unvax) %>%
  ggplot(aes(x=quarter, y= percent_fully_vax, fill=key)) +
    geom_col(position = "dodge") +
  labs(x = "Quarter", y = "Percentage", fill = "Vaccine Status", title = "Vaccination Status in California by Quarter from September 2022 - June 2023") +
  scale_fill_discrete(labels = c("atleast one dose", "fully vaccinated", "partially vaccinated", "unvaccinated"))

```

## Visualization 1 Interpretation

Among in the study, majority of participants in California between September 2022 - July 2023 had at least one vaccine dose following some being fully vaccinated, unvaccinated, and partially vaccinated, respectively.

## Visualization 2

```{r, echo = TRUE}

CA_flu_merge_demo_2 %>%
  gather(key, flu_incidence ,-quarter, -age_category, -county, -cumulative_severe, -current_infected, -new_infected, -new_severe, -susceptible) %>%
  ggplot(aes(x=quarter, y= flu_incidence, fill=key)) +
    geom_col(position = "dodge") +
  labs(x = "Quarter", y = "Percentage", fill = "Flu Cases", title = "Flu Incidence Cases in California by Quarter from September 2022 - June 2023") +
  scale_fill_discrete(labels = c("new infections", "severe infections")) 
  
```

## Visualization 2 Interpretation

Among in the study, majority of participants in California between September 2022 - July 2023 suffered from new infections, following some experiencing severe infections.


